# 東京スイーツ情報サイト 仕様書

## 1. サイト概要
- **目的**: 東京の人気スイーツと新作情報を網羅的に紹介し、ユーザーがエリアや好みに合わせて店舗・商品を見つけられるようにする。
- **想定ユーザー**: 東京在住または訪問予定でスイーツ巡りを楽しみたい20〜40代、カフェ巡りが趣味の層、旅行客。
- **ビジネスゴール**: 広告・アフィリエイト（予約・EC）による収益化、SNS シェア拡大によるトラフィック確保。

## 2. コンテンツ要件
### 2.1 カテゴリ構成
- エリア別: 23区・市部を主要ターミナル駅単位で分類。
- スイーツ種類別: ケーキ、和菓子、アイス・ジェラート、ベーカリー系、期間限定。
- 特集記事: 季節イベント（桜、ハロウィン、クリスマス）、百貨店催事、ホテルビュッフェ、SNS 映え店舗。

### 2.2 情報項目
各店舗・商品ページに以下を表示する。
- 店舗名 / 商品名
- 住所・最寄り駅
- 営業時間・定休日
- 価格帯・予算目安
- 人気メニュー／看板商品の写真
- 口コミ抜粋（提携サイト API から引用）
- 予約・EC 購入リンク（アフィリエイト）
- マップ位置（Google Maps / Mapbox 埋め込み）

### 2.3 自動更新要件
- 飲食店情報 API（例: ホットペッパーグルメ、ぐるなび）からスケジュール実行で新規店舗・季節限定商品のデータを取得。
- SNS トレンド（Instagram ハッシュタグ、X キーワード）をクローリングし、投稿数やエンゲージメントに応じてランキングを自動生成。
- イベント・催事カレンダーを都内百貨店公式サイト RSS から取得し、特集ページに自動反映。

## 3. 機能要件
### 3.1 フロントエンド
- トップページ: 新着スイーツ、人気ランキング、地図検索への導線。
- 検索・絞り込み: エリア、カテゴリ、予算、オープン時間帯、テイクアウト可否。
- マップ表示: 地図上に店舗ピンを表示し、ホバーまたはタップで概要カードを表示。現在地からのルート検索リンクを提供。
- レコメンド: ユーザーの閲覧履歴やトレンドデータを活用し、関連スイーツを表示。
- レスポンシブ対応: スマホ・タブレット優先設計。

### 3.2 バックエンド
- データ収集ジョブ: Cron + サーバレス（AWS Lambda 等）で API 連携・スクレイピングを実行し、Firestore / DynamoDB 等に保存。
- 正規化・重複排除ロジック: 店舗の重複情報をマージし、更新日時を管理。
- 画像管理: 外部 API から取得できない場合は自社 CDN にアップロードし最適化。
- API 提供: フロント向け GraphQL または REST API を実装（認証付き管理画面用エンドポイント含む）。

### 3.3 管理機能
- 編集者ダッシュボード: 手動での特集記事編集、広告枠設定、データ修正。
- 承認フロー: 自動取得データの公開前レビュー機能。
- 通知: データ収集失敗や API 制限到達時に Slack / Email へ通知。

## 4. データ・インフラ構成
- **データソース**: 飲食店 API、SNS API、公式サイト RSS。
- **更新頻度**: 店舗情報は日次、SNS トレンドは3時間毎、イベント情報は週次。
- **キャッシュ戦略**: CDN キャッシュ＋フロントエンド側の SWR/RTK Query で再検証。
- **インフラ**: フロントエンドは静的ホスティング（Next.js + Vercel 等）、バックエンドはクラウド Functions とマネージド DB。

## 5. 非機能要件
- **パフォーマンス**: LCP 2.5 秒以内、画像は WebP/AVIF に最適化、遅延読み込み対応。
- **SEO 対策**: 構造化データ（`LocalBusiness` スキーマ）、パンくずリスト、メタタグ自動生成。
- **アクセシビリティ**: WCAG 2.1 AA 準拠、キーボード操作と代替テキスト必須。
- **セキュリティ**: API キー暗号化保管、レートリミット、CSP 設定。

## 6. 開発・運用
- **開発プロセス**: GitHub Flow、CI/CD（Lint・テスト自動実行）。
- **モニタリング**: ページビュー／CVR 解析（GA4, Looker Studio）、API エラーログ（CloudWatch）。
- **ロードマップ初期タスク**:
  1. 飲食店 API 選定とデータスキーマ定義
  2. 地図表示コンポーネント試作（Mapbox GL JS）
  3. 自動更新ジョブの PoC（1日1回実行）
  4. トップページ UI/UX デザイン案作成
  5. 管理ダッシュボード MVP 開発

## 7. 依存・リスク
- 外部 API 制限や仕様変更によるデータ欠損リスク
- 画像利用の著作権・利用規約遵守
- SNS データ取得の利用規約確認（スクレイピング禁止対策）

## 8. 将来的な拡張
- 多言語対応（英語・中国語）による観光客向けコンテンツ強化
- ユーザー投稿型レビュー機能
- AR を活用したスイーツ撮影フィルター、フォトコンテスト連携
